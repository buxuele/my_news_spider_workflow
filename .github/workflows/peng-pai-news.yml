# å·¥ä½œæµåç§°ï¼Œåœ¨ GitHub Actions ç•Œé¢æ˜¾ç¤º
name: çˆ¬è™«è‡ªåŠ¨åŒ–

# è§¦å‘æ¡ä»¶ï¼šæ¯2åˆ†é’Ÿè¿è¡Œä¸€æ¬¡
# æ³¨æ„ï¼šå…è´¹ç‰ˆ GitHub Actions å¯èƒ½é™åˆ¶æœ€çŸ­ä¸º5åˆ†é’Ÿï¼Œè°ƒè¯•æ—¶è‹¥å¤±è´¥å¯æ”¹æˆ '*/5 * * * *'
on:
  schedule:
    - cron: '*/5 * * * *'  # æ¯2åˆ†é’Ÿè§¦å‘
  workflow_dispatch:        # ğŸ‘ˆ æ‰‹åŠ¨è§¦å‘æŒ‰é’®ï¼Œæ¨èåŠ ä¸Šï¼Œ æµ‹è¯•æ–¹ä¾¿


# å®šä¹‰ä»»åŠ¡
jobs:
  run-crawler:
    # ä½¿ç”¨æœ€æ–°çš„ Ubuntu ç¯å¢ƒ
    runs-on: ubuntu-latest

    # æ‰§è¡Œæ­¥éª¤
    steps:
      # æ­¥éª¤1ï¼šæ‹‰å–ä»“åº“ä»£ç 
      - name: æ‹‰å–ä»£ç 
        uses: actions/checkout@v4

      # æ­¥éª¤2ï¼šè®¾ç½® Python ç¯å¢ƒ
      - name: é…ç½® Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.9'  # Python ç‰ˆæœ¬ï¼Œå»ºè®®ç”¨ 3.9ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´

      # æ­¥éª¤3ï¼šå®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœ‰ requirements.txtï¼‰
      # ä»…å½“æ–‡ä»¶å­˜åœ¨æ—¶å®‰è£…ï¼Œé¿å…é‡å¤å®‰è£…
      - name: å®‰è£…ä¾èµ–
        run: |
          if [ -f requirements.txt ]; then
            pip install -r requirements.txt
          fi

      # æ­¥éª¤4ï¼šæ‰“å°å½“å‰æ—¶é—´ï¼Œæ–¹ä¾¿è°ƒè¯•
      - name: æ‰“å°è¿è¡Œæ—¶é—´
        run: echo "now is >>> $(date)"

      # æ­¥éª¤5ï¼šè¿è¡Œçˆ¬è™«è„šæœ¬
      - name: è¿è¡Œçˆ¬è™«
        run: python3 news_spider/peng_pai_02.py